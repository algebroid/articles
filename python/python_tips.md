ã“ã“ã§ã¯Pythonã®å°ãƒã‚¿ã‚’ç¤ºã™ã€‚Raymond Hettingerã®ãƒ„ã‚¤ãƒ¼ãƒˆå‚™å¿˜éŒ²ã¨ã‚‚ã„ã†ã€‚ 

## æ•°å€¤

### `int`ã¯`float`ã®ã‚µãƒ–ã‚»ãƒƒãƒˆã§ã¯ãªã„

```python
>>> 1E8 == 10**8
True
>>> 1E100 == 10**100
False 
```

æ­£ç¢ºãªæ¯”è¼ƒã‚’è¡Œã„ãŸã„å ´åˆã€`Decimal`ã‚’ä½¿ã†ã€‚

### æ•°å€¤ã¯ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã§åŒºåˆ‡ã‚‹ã“ã¨ãŒã§ãã‚‹

`1_234_567`ã¯åˆæ³•ãªæ•´æ•°ãƒªãƒ†ãƒ©ãƒ«ã§ã‚ã‚‹ã€‚ã“ã‚Œã¯`1,234,567`ã®ã‚ˆã†ã«æ•°å€¤ã‚’è¦‹ã‚„ã™ãã™ã‚‹ãŸã‚ã®æ„å‘³ã‚ã„ãŒã‚ã‚‹ã€‚

## æ–‡å­—åˆ—

### f-stringsã¯å¥½ããªã ã‘ãƒã‚¹ãƒˆã§ãã‚‹

```python
>>> f"{f'{len(dir(list))}'*5}"
'4646464646' 
```

### f-stringsã¯`\N{name}`ã‚’ä¸Šæ‰‹ã«ãƒ‘ãƒ¼ã‚¹ã§ãã‚‹

`\N{name}`ã¯ã€æ–‡å­—åˆ—ä¸­ã«ãŠã„ã¦[ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ–‡å­—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹](http://unicode.org/ucd/)ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹åç§°ã§ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ‰æ–‡å­—ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã§ã‚ã‚‹ã€‚

```python
>>> "\N{SUSHI}"
'ğŸ£'
```

Python 3.6ã«ã¦å°å…¥ã•ã‚ŒãŸf-stringsã¯è³¢ã„ã®ã§ã€`\N{name}`ã¨æ··åœ¨ã—ã¦ã‚‚æ–‡å­—åˆ—ã‚’é–“é•ã„ãªããƒ‘ãƒ¼ã‚¹ã—ã¦ãã‚Œã‚‹ã€‚

```python
>>> ordinal, state = 50, "HawaiÊ»i"
>>> print(f'{ordinal} \N{long rightwards arrow} {state}')
50 âŸ¶ HawaiÊ»i
```

### `str.find()`ã‚ˆã‚Š`str.index()`ã‚’ä½¿ã†ã¹ã

`str.find()`ã¯å€¤ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆ`-1`ã‚’è¿”ã™ãŒã€Pythonã«ã¨ã£ã¦ã“ã®å€¤ã¯è² ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨è§£é‡ˆã§ãã¦ã—ã¾ã†ï¼ˆ`"abc"[-1] == 'c'`ï¼‰ã€‚ã“ã‚Œã¯ç©ºæ–‡å­—åˆ—ä»¥å¤–ã®æ­£ã—ã„ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ‡ã™å€¤ã§ã‚ã‚‹ã€‚`str.index()`ã¯å€¤ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã€‚é–“é•ã„ã‚’èµ·ã“ã•ãªã„ãŸã‚ã«ã¯ãªã‚‹ã¹ã`str.index()`ã‚’ä½¿ã£ãŸæ–¹ãŒã‚ˆã„ã€‚

### æœ€å°åŠ´åŠ›ã®åŸç†

ã“ã‚Œã¯æ–‡å­—åˆ—ã«é™ã£ãŸå•é¡Œã§ã¯ãªã„ãŒã€ã‚ã‚‹ç‰¹å®šã®å•é¡Œã‚’è§£æ±ºã™ã‚‹éš›ã¯ãã®ç›®çš„ã«ç‰¹åŒ–ã—ãŸæ–¹æ³•ã‚’æ¡ã‚‹ã¹ãã§ã€ä¸€èˆ¬çš„ãªæ–¹æ³•ã‚’ä½¿ã‚ãªã„ã»ã†ãŒã‚ˆã„ã€‚

å…·ä½“ä¾‹ï¼š

* è¡Œæœ«ã‚’å‰Šé™¤ã™ã‚‹ãŸã‚ã«ã¯`rstrip()`ã‚’ä½¿ã†ã¹ãã§`strip()`ã¯ä½¿ã‚ãªã„
* `str.replace()`ãŒä½¿ãˆã‚‹å ´é¢ã§`re.sub()`ã‚’ä½¿ã†ã¹ãã§ãªã„
* Fabricã§æ¸ˆã‚€å ´é¢ã§Ansibleã‚’ä½¿ã‚ãªã„ï¼ˆã“ã‚Œã¯æ–‡å­—åˆ—ã¨é–¢ä¿‚ãªã„ï¼‰

## ãƒªã‚¹ãƒˆ

### ã‚¹ãƒ©ã‚¤ã‚¹ã®é–“é•ã„ã«ã”ç”¨å¿ƒ

```python
>>> s = 'abc'
>>> s[-3:] # last three
'abc'
>>> s[-2:] # last two
'bc'
>>> s[-1:] # last one
'c'
>>> s[-0:] # oops!
'abc'
```

ãã‚“ãªãƒã‚«ãªã¨æ€ã†ã‹ã‚‚ã—ã‚Œãªã„ãŒä»¥å¤–ã«ã‚‚ãƒãƒã‚‹ã¨ã„ã†å£°ãŒã‚ã‚‹ã€‚

## ãƒ«ãƒ¼ãƒ—ä¸­ã§ãƒªã‚¹ãƒˆã®è¦ç´ ã‚’å¤‰æ›´ã›ãšã€ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã»ã†ãŒã‚ˆã„

```python
# Just okay
for i, x in enumerate(data):
    data[i] *= factor

# Better
scaled_data = [x * factor for x in data]
```

ãƒ«ãƒ¼ãƒ—ä¸­ã§å‰¯ä½œç”¨ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ãƒ‡ãƒ¼ã‚¿ã®å¤‰æ›´ã‚’è¿½è·¡ã—ã¥ã‚‰ã„ãŸã‚ã€ä¸‹ã®ã‚ˆã†ã«ã—ãŸã»ã†ãŒã‚ˆã„ã€‚

## ãƒ‡ã‚£ã‚¯ã‚·ãƒ§ãƒŠãƒª

### ãƒ‡ã‚£ã‚¯ã‚·ãƒ§ãƒŠãƒªã®è¦ç´ ã‚’æ–‡å­—åˆ—ä¸­ã«æ¥½ã«å±•é–‹ã™ã‚‹

é©å½“ãªãƒ‡ã‚£ã‚¯ã‚·ãƒ§ãƒŠãƒªãŒã‚ã‚‹ã¨ãã€`str.format_map()`ã‚’ä½¿ã†ã¨ç°¡å˜ã«è¦ç´ ã‚’æ–‡å­—åˆ—æ•´å½¢ã§ãã‚‹ã€‚

```python
"""your name: {name}
your status: {status}
your affiliation: {company}""".format_map(info)
```

ã‚„ã‚„åŠ£ã‚‹æ–¹æ³•:

```python
f"""your name: {info['name']}
your status: {info['status']}
your affiliation: {info['company']}"""
```

## set

### Pythonã®setã¯åŠé †åºã§ã‚ã‚‹

ç†ç”±ã¯`a <= b`ã¯`a.issubset(b)`ã§ã‚ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚

## å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

### ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é–“é•ã£ãŸå‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã§ä¿®æ­£ã™ã‚‹

å…·ä½“ä¾‹ï¼š`algebra`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®`quadratic`ã¨ã„ã†é–¢æ•°ãŒèª¤ã£ã¦`Tuple[float, float]`ã¨ãƒãƒ¼ã‚¯ã•ã‚Œã¦ã„ã‚‹ã€‚

```python
algebra.quadratic.__annotations__['return'] = typing.Tuple[complex, complex]
```

## ã‚¯ãƒ©ã‚¹

### Python 3ã§ã¯`__eq__()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ‹¡å¼µã¾ãŸã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã—ãŸå ´åˆã€ãã®ã‚¯ãƒ©ã‚¹ã¯unhashableã«ãªã‚‹

hashã«ã‚ˆã‚‹åŒå€¤æ€§ãƒ†ã‚¹ãƒˆãŒäº‹æ•…ã‚’èµ·ã“ã™ã®ã‚’é˜²ã„ã§ã„ã‚‹ã€‚è©³ã—ãã¯[Python ã«ãŠã‘ã‚‹ hashable](https://qiita.com/yoichi22/items/ebf6ab3c6de26ddcc09a)ã‚’å‚ç…§ã€‚

## ã‚¨ãƒ©ãƒ¼å‡¦ç†

### `raise from None`ã‚¤ãƒ‡ã‚£ã‚ªãƒ 

ã‚ã‚‹ä¾‹å¤–ã‚’æ–°ã—ã„ä¾‹å¤–ã§ç½®ãæ›ãˆã‚‹ã¨ãã€ã“ã®æ–¹æ³•ã§ä¾‹å¤–ã®é€£é–ã‚’æ­¢ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚


```python
try:
    f(x)
except MisleadingError:
   raise CorrectError from None
```

## ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

### æ¨™æº–å‡ºåŠ›ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã™ã‚‹

ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯`pow`é–¢æ•°ã®helpå†…å®¹ã‚’`help.txt`ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã¦ã„ã‚‹ã€‚

```python
with open('help.txt', 'w') as f:
    with contextlib.redirect_stdout(f):
        help(pow)
```
